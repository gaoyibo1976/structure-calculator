# 结构计算程序修改日志

## [1.7.2] - 2026-01-04
### Fixed
- 修复修改截面编号后按下回车键，列表不更新的问题
- 更新回车键响应机制，确保先保存参数、更新列表，再执行计算

## [1.7.1] - 2026-01-04
### Fixed
- 修复回写文件时修改原文件单元格样式和格式的问题
- 确保只修改A-P列，其他列不允许修改
- 优化添加新行的逻辑，保持原文件样式
- 修复代码中残留的多余代码片段

## [1.7.0] - 2026-01-04
### Fixed
- 修复编号修改后列表未更新的问题
- 删除临时文件相关代码，简化文件写入逻辑
- 实现数据列表和列表框的实时同步更新
- 优化新增数据的处理逻辑，自动生成截面编号
- 修改文件写入逻辑，只回写读取的单元格

## [1.6.0] - 2026-01-04
### Fixed
- 修复编号修改后列表未更新的问题
- 修复保存数据时只生成临时文件不写入原文件的问题
- 将默认路径改为我的文档下的work目录
- 添加保存文件或计算完成时的状态栏提示

## [1.5.0] - 2026-01-04
### Added
- 左侧面板顶部添加截面编号输入框，支持显示和修改截面编号
- 右侧面板添加"保存数据到文件"按钮，支持手动保存数据
- 右侧面板添加"新增数据"按钮，支持新增截面数据
- 实现数据保存算法：读入数据构造section_data列表，新增数据附加到列表，保存时将完整列表写入原文件
- 支持切换截面时自动保存当前数据
- 为参数输入框添加回车键响应

### Changed
- 重构数据保存逻辑，确保新增数据能正确保存到原文件
- 优化数据加载和更新机制

## [1.4.0] - 2026-01-04
### Added
- 标题栏增加版本号，自动从CHANGELOG.md读取
- 优化窗口最大化时的布局，保持参数区和列表宽度不变

### Changed
- 参数输入框宽度减小一半，从200px改为100px
- 单截面计算按钮宽度与参数区匹配，批量计算按钮宽度与批量计算区匹配
- 修复是否地震作用组合没有随着列表选择更新数据的问题

## [1.3.0] - 2026-01-04
### Added
- 实现点击截面列表时自动执行计算
- 在计算书输入参数中增加是否地震作用组合

### Changed
- 调整截面列表框和文本输出框的宽度比例（1:3）
- 修复单截面计算书序号比列表序号大1的问题

### Removed
- 撤销将参数变化实时写入数据文件的功能

## [1.2.0] - 2026-01-04
### Added
- 在计算报告中显示弯矩设计值M
- 在计算报告中显示结构重要性系数γ0
- 实现自动计算抗力效应比R/S

### Changed
- 优化抗力效应比计算逻辑：根据是否地震作用组合自动选择MuE/M或Mu/M
- 统一报告生成模块，采用面向对象设计
- 将矩形和T形截面的报告生成逻辑合并到一个文件中

### Removed
- 删除旧的报告生成模块：report_beam_rect.py 和 report_beam_t.py

## [1.1.0] - 2026-01-04
### Added
- 创建统一的报告生成模块 report_beam.py
- 实现面向对象的报告生成架构
- 保持向后兼容性，无需修改调用代码

### Changed
- 更新主程序导入语句，使用新的报告生成模块
- 优化代码结构，提高代码复用性

## [1.0.0] - 2026-01-03
### Added
- 初始版本，支持矩形截面梁抗弯承载力计算
- 支持T形截面梁抗弯承载力计算
- 实现混凝土参数动态获取
- 实现钢筋参数动态获取
- 支持根据混凝土强度等级动态计算β1
- 支持根据钢筋强度等级动态计算ξb
- 实现完整的错误处理机制
- 添加类型注解，提高代码质量
- 创建单元测试，确保计算准确性

### Changed
- 优化目录结构：main目录放主程序，core目录放核心计算模块，common目录放通用函数
- 改进导入机制，解决ModuleNotFoundError问题

## [0.9.0] - 2026-01-02
### Added
- 实现基础的梁抗弯承载力计算功能
- 创建初始的目录结构
- 实现Excel数据读取和结果输出

### Changed
- 调整代码架构，准备模块化改造

## [0.8.0] - 2026-01-01
### Added
- 项目初始化
- 创建基础的计算逻辑
- 实现简单的输入输出功能